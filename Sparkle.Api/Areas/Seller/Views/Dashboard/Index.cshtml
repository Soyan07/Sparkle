@model Sparkle.Api.Areas.Seller.Controllers.DashboardController.SellerDashboardStats
@{
    ViewData["Title"] = "Dashboard";
    var langCookie = Context.Request.Cookies["sparkle-lang"] == "bn" ? "bn" : "en";
    var isBangla = langCookie == "bn";
}

<!-- Dashboard Widgets Grid -->
<div class="tw-grid tw-grid-cols-1 lg:tw-grid-cols-3 tw-gap-4">
    
    <!-- Left Column (2/3 width on large screens) -->
    <div class="lg:tw-col-span-2 tw-space-y-4">
        
        <!-- Sales Summary Widget -->
        <div class="tw-bg-white tw-border tw-border-gray-300 tw-rounded-sm tw-shadow-sm">
            <div class="tw-bg-gray-100 tw-px-4 tw-py-2 tw-border-b tw-border-gray-300 tw-flex tw-justify-between tw-items-center">
                <h3 class="tw-font-bold tw-text-sm tw-text-gray-800">Sales Summary</h3>
                <div class="tw-text-xs tw-text-gray-500">Last updated: @DateTime.Now.ToString("t")</div>
            </div>
            <div class="tw-p-4">
                <div class="tw-grid tw-grid-cols-2 md:tw-grid-cols-4 tw-gap-4 tw-mb-4">
                    <div class="tw-text-center tw-border-r tw-border-gray-200 last:tw-border-0">
                        <div class="tw-text-xs tw-text-gray-500 tw-mb-1">Today's Sales</div>
                        <div class="tw-text-xl tw-font-bold tw-text-gray-900">৳@Model.TodayRevenue.ToString("N0")</div>
                        <div class="tw-text-xs tw-text-green-600">@Model.TodayOrders units</div>
                    </div>
                    <div class="tw-text-center tw-border-r tw-border-gray-200 last:tw-border-0">
                        <div class="tw-text-xs tw-text-gray-500 tw-mb-1">7 Days</div>
                        <div class="tw-text-xl tw-font-bold tw-text-gray-900">৳@((Model.TodayRevenue * 7).ToString("N0"))</div> <!-- Simulated -->
                        <div class="tw-text-xs tw-text-green-600">@Model.WeekOrders units</div>
                    </div>
                    <div class="tw-text-center tw-border-r tw-border-gray-200 last:tw-border-0">
                        <div class="tw-text-xs tw-text-gray-500 tw-mb-1">30 Days</div>
                        <div class="tw-text-xl tw-font-bold tw-text-gray-900">৳@Model.MonthRevenue.ToString("N0")</div>
                        <div class="tw-text-xs tw-text-green-600">@((Model.WeekOrders * 4).ToString("N0")) units</div> <!-- Simulated -->
                    </div>
                    <div class="tw-text-center">
                        <div class="tw-text-xs tw-text-gray-500 tw-mb-1">Total Balance</div>
                        <div class="tw-text-xl tw-font-bold tw-text-gray-900">৳@Model.TotalRevenue.ToString("N0")</div>
                        <div class="tw-text-xs tw-text-gray-500">Next payout: Oct 25</div>
                    </div>
                </div>
                <div class="tw-h-40 tw-bg-gray-50 tw-border tw-border-dashed tw-border-gray-300 tw-flex tw-items-center tw-justify-center tw-text-gray-400 tw-text-sm">
                    [Sales Graph Visualization Placeholder]
                </div>
            </div>
        </div>

        <!-- Your Orders Widget -->
        <div class="tw-bg-white tw-border tw-border-gray-300 tw-rounded-sm tw-shadow-sm">
            <div class="tw-bg-gray-100 tw-px-4 tw-py-2 tw-border-b tw-border-gray-300 tw-flex tw-justify-between tw-items-center">
                <h3 class="tw-font-bold tw-text-sm tw-text-gray-800">Your Orders</h3>
                <a href="/seller/dashboard/orders" class="tw-text-xs tw-text-blue-700 hover:tw-underline hover:tw-text-orange-700">View all orders</a>
            </div>
            <div class="tw-p-0">
                <div class="tw-flex tw-border-b tw-border-gray-200 tw-bg-gray-50">
                    <div class="tw-flex-1 tw-py-2 tw-px-4 tw-text-center tw-text-sm tw-font-semibold tw-border-b-2 tw-border-orange-500 tw-text-gray-900">Pending (@Model.PendingOrders)</div>
                    <div class="tw-flex-1 tw-py-2 tw-px-4 tw-text-center tw-text-sm tw-text-gray-600 hover:tw-bg-gray-100 tw-cursor-pointer">Unshipped (@(Model.PendingOrders + 2))</div>
                    <div class="tw-flex-1 tw-py-2 tw-px-4 tw-text-center tw-text-sm tw-text-gray-600 hover:tw-bg-gray-100 tw-cursor-pointer">Return Requests (0)</div>
                </div>
                
                @if (Model.RecentOrders.Any())
                {
                    <div class="tw-divide-y tw-divide-gray-100">
                        @foreach (var order in Model.RecentOrders.Take(5))
                        {
                            <div class="tw-p-3 hover:tw-bg-gray-50 tw-flex tw-justify-between tw-items-center">
                                <div>
                                    <div class="tw-flex tw-items-center tw-gap-2">
                                        <span class="tw-text-sm tw-font-bold tw-text-blue-700">#@order.OrderId</span>
                                        <span class="tw-text-xs tw-text-gray-500">@order.Date.ToString("MMM dd")</span>
                                    </div>
                                    <div class="tw-text-xs tw-text-gray-600">@order.CustomerName</div>
                                </div>
                                <div class="tw-text-right">
                                    <div class="tw-text-sm tw-font-bold">৳@order.Total.ToString("N0")</div>
                                    <span class="tw-inline-block tw-px-2 tw-py-0.5 tw-rounded-full tw-text-xs tw-font-medium 
                                        @(order.Status == "Pending" ? "tw-bg-yellow-100 tw-text-yellow-800" : 
                                          order.Status == "Delivered" ? "tw-bg-green-100 tw-text-green-800" : "tw-bg-gray-100 tw-text-gray-800")">
                                        @order.Status
                                    </span>
                                </div>
                                <div class="tw-flex tw-gap-2">
                                    <button class="tw-px-3 tw-py-1 tw-border tw-border-gray-300 tw-bg-white tw-rounded tw-text-xs tw-font-medium hover:tw-bg-gray-50">Print Label</button>
                                    <button class="tw-px-3 tw-py-1 tw-border tw-border-gray-300 tw-bg-white tw-rounded tw-text-xs tw-font-medium hover:tw-bg-gray-50">Ship</button>
                                </div>
                            </div>
                        }
                    </div>
                }
                else
                {
                    <div class="tw-p-8 tw-text-center tw-text-gray-500">
                        <i class="bi bi-inbox tw-text-2xl tw-mb-2"></i>
                        <p class="tw-text-sm">No pending orders right now.</p>
                    </div>
                }
            </div>
        </div>
        
        <!-- Inventory Health -->
        <div class="tw-bg-white tw-border tw-border-gray-300 tw-rounded-sm tw-shadow-sm">
            <div class="tw-bg-gray-100 tw-px-4 tw-py-2 tw-border-b tw-border-gray-300 tw-flex tw-justify-between tw-items-center">
                <h3 class="tw-font-bold tw-text-sm tw-text-gray-800">Inventory Planning</h3>
            </div>
            <div class="tw-p-4 tw-flex tw-items-center tw-justify-between">
                <div class="tw-text-center">
                    <div class="tw-text-2xl tw-font-bold tw-text-gray-900">@Model.ActiveProducts</div>
                    <div class="tw-text-xs tw-text-gray-500">Active SKUs</div>
                </div>
                <div class="tw-text-center">
                    <div class="tw-text-2xl tw-font-bold tw-text-red-600">@Model.LowStockProducts</div>
                    <div class="tw-text-xs tw-text-gray-500">Low Stock</div>
                </div>
                <div class="tw-text-center">
                    <div class="tw-text-2xl tw-font-bold tw-text-gray-900">@Model.TotalProducts</div>
                    <div class="tw-text-xs tw-text-gray-500">Total SKUs</div>
                </div>
                <div>
                    <a href="/seller/dashboard/products" class="tw-px-4 tw-py-2 tw-bg-white tw-border tw-border-gray-400 tw-rounded tw-text-sm tw-font-medium hover:tw-bg-gray-50">Manage Inventory</a>
                </div>
            </div>
        </div>

    </div>
    
    <!-- Right Column (1/3 width) -->
    <div class="tw-space-y-4">
        
        <!-- Performance Widget -->
        <div class="tw-bg-white tw-border tw-border-gray-300 tw-rounded-sm tw-shadow-sm">
            <div class="tw-bg-gray-100 tw-px-4 tw-py-2 tw-border-b tw-border-gray-300">
                <h3 class="tw-font-bold tw-text-sm tw-text-gray-800">Account Health</h3>
            </div>
            <div class="tw-p-4">
                <div class="tw-flex tw-items-center tw-gap-3 tw-mb-4">
                    <div class="tw-w-12 tw-h-12 tw-rounded-full tw-bg-green-100 tw-flex tw-items-center tw-justify-center tw-text-green-600 tw-text-xl">
                        <i class="bi bi-heart-pulse-fill"></i>
                    </div>
                    <div>
                        <div class="tw-font-bold tw-text-green-700">Healthy</div>
                        <div class="tw-text-xs tw-text-gray-500">No policy violations</div>
                    </div>
                </div>
                
                <div class="tw-space-y-3">
                    <div class="tw-flex tw-justify-between tw-text-sm">
                        <span class="tw-text-gray-600">Order Defect Rate</span>
                        <span class="tw-font-medium tw-text-green-600">0.0%</span>
                    </div>
                    <div class="tw-flex tw-justify-between tw-text-sm">
                        <span class="tw-text-gray-600">Late Shipment Rate</span>
                        <span class="tw-font-medium tw-text-green-600">0.0%</span>
                    </div>
                    <div class="tw-flex tw-justify-between tw-text-sm">
                        <span class="tw-text-gray-600">Pre-fulfillment Cancel Rate</span>
                        <span class="tw-font-medium tw-text-green-600">0.0%</span>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- News Widget -->
        <div class="tw-bg-white tw-border tw-border-gray-300 tw-rounded-sm tw-shadow-sm">
            <div class="tw-bg-gray-100 tw-px-4 tw-py-2 tw-border-b tw-border-gray-300 tw-flex tw-justify-between tw-items-center">
                <h3 class="tw-font-bold tw-text-sm tw-text-gray-800">News</h3>
                <a href="#" class="tw-text-xs tw-text-blue-700 hover:tw-underline hover:tw-text-orange-700">Read more</a>
            </div>
            <div class="tw-p-4 tw-space-y-3">
                <div>
                    <div class="tw-text-xs tw-text-gray-500 tw-mb-1">Oct 20, 2024</div>
                    <a href="#" class="tw-text-sm tw-font-medium tw-text-blue-700 hover:tw-underline hover:tw-text-orange-700 tw-block tw-mb-1">
                        New Fee Structure for Electronics Category
                    </a>
                    <p class="tw-text-xs tw-text-gray-600 tw-line-clamp-2">
                        Starting next month, we are adjusting the referral fees for electronics...
                    </p>
                </div>
                <div class="tw-border-t tw-border-gray-100 tw-pt-3">
                    <div class="tw-text-xs tw-text-gray-500 tw-mb-1">Oct 15, 2024</div>
                    <a href="#" class="tw-text-sm tw-font-medium tw-text-blue-700 hover:tw-underline hover:tw-text-orange-700 tw-block tw-mb-1">
                        Prepare for the upcoming Holiday Season
                    </a>
                    <p class="tw-text-xs tw-text-gray-600 tw-line-clamp-2">
                        Check out our guide on how to optimize your inventory for the peak season...
                    </p>
                </div>
            </div>
        </div>
        
        <!-- Seller Forums -->
        <div class="tw-bg-white tw-border tw-border-gray-300 tw-rounded-sm tw-shadow-sm">
            <div class="tw-bg-gray-100 tw-px-4 tw-py-2 tw-border-b tw-border-gray-300">
                <h3 class="tw-font-bold tw-text-sm tw-text-gray-800">Seller Forums</h3>
            </div>
            <div class="tw-p-4">
                <a href="#" class="tw-text-sm tw-text-blue-700 hover:tw-underline hover:tw-text-orange-700 tw-block tw-mb-2">
                    How to handle return requests efficiently?
                </a>
                <a href="#" class="tw-text-sm tw-text-blue-700 hover:tw-underline hover:tw-text-orange-700 tw-block tw-mb-2">
                    Best practices for product photography
                </a>
                <a href="#" class="tw-text-sm tw-text-blue-700 hover:tw-underline hover:tw-text-orange-700 tw-block">
                    Shipping delays in Dhaka region
                </a>
            </div>
        </div>

    </div>
</div>
