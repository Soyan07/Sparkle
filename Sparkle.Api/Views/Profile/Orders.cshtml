@model List<Sparkle.Domain.Orders.Order>
@{
    ViewData["Title"] = "Order History";
    Layout = "_ProfileLayout";
    var langCookie = Context.Request.Cookies["sparkle-lang"] == "bn" ? "bn" : "en";
    var isBangla = langCookie == "bn";
}

<div class="card border-0 shadow-sm">
    <div class="card-body p-4">
        <h4 class="mb-4">@(isBangla ? "অর্ডার ইতিহাস" : "Order History")</h4>

        @if (!Model.Any())
        {
            <div class="text-center py-5 text-muted">
                <div class="mb-3">
                    <i class="bi bi-cart-x" style="font-size: 4rem; color: #e2e8f0;"></i>
                </div>
                <h5 class="fw-bold">@(isBangla ? "কোন অর্ডার পাওয়া যায়নি" : "No orders found")</h5>
                <p class="mb-4">@(isBangla ? "আপনি এখনো কোন অর্ডার করেননি।" : "You haven't placed any orders yet.")</p>
                <a href="/" class="btn btn-primary px-4 py-2">
                    @(isBangla ? "কেনাকাটা শুরু করুন" : "Start Shopping")
                </a>
            </div>
        }
        else
        {
            <div class="table-responsive">
                <table class="table table-hover align-middle">
                    <thead class="bg-light">
                        <tr>
                            <th class="py-3 ps-3">@(isBangla ? "অর্ডার #" : "Order #")</th>
                            <th class="py-3">@(isBangla ? "তারিখ" : "Date")</th>
                            <th class="py-3">@(isBangla ? "মোট" : "Total")</th>
                            <th class="py-3">@(isBangla ? "অবস্থা" : "Status")</th>
                            <th class="py-3 pe-3 text-end">@(isBangla ? "পদক্ষেপ" : "Action")</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var order in Model)
                        {
                            <tr>
                                <td class="ps-3">
                                    <span class="fw-medium text-dark">#@order.OrderNumber</span>
                                </td>
                                <td class="text-muted">
                                    @order.OrderDate.ToString("MMM dd, yyyy")
                                </td>
                                <td class="fw-bold text-dark">
                                    ৳@order.TotalAmount.ToString("N0")
                                </td>
                                <td>
                                    @switch (order.Status.ToString())
                                    {
                                        case "Pending":
                                            <span class="badge bg-warning-subtle text-warning-emphasis border border-warning-subtle px-2 py-1 rounded-pill">
                                                @(isBangla ? "অপেক্ষমান" : "Pending")
                                            </span>
                                            break;
                                        case "Confirmed":
                                            <span class="badge bg-info-subtle text-info-emphasis border border-info-subtle px-2 py-1 rounded-pill">
                                                @(isBangla ? "নিশ্চিত" : "Confirmed")
                                            </span>
                                            break;
                                        case "Shipped":
                                            <span class="badge bg-primary-subtle text-primary-emphasis border border-primary-subtle px-2 py-1 rounded-pill">
                                                @(isBangla ? "শিপ করা হয়েছে" : "Shipped")
                                            </span>
                                            break;
                                        case "Delivered":
                                            <span class="badge bg-success-subtle text-success-emphasis border border-success-subtle px-2 py-1 rounded-pill">
                                                @(isBangla ? "ডেলিভারি হয়েছে" : "Delivered")
                                            </span>
                                            break;
                                        case "Cancelled":
                                            <span class="badge bg-danger-subtle text-danger-emphasis border border-danger-subtle px-2 py-1 rounded-pill">
                                                @(isBangla ? "বাতিল" : "Cancelled")
                                            </span>
                                            break;
                                        default:
                                            <span class="badge bg-secondary-subtle text-secondary-emphasis border border-secondary-subtle px-2 py-1 rounded-pill">
                                                @order.Status
                                            </span>
                                            break;
                                    }
                                </td>
                                <td class="text-end pe-3">
                                    <a href="/orders/details/@order.Id" class="btn btn-sm btn-outline-primary rounded-pill px-3">
                                        @(isBangla ? "বিস্তারিত" : "Details")
                                    </a>
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        }
    </div>
</div>
