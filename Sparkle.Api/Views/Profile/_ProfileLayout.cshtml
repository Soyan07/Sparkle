@{
    Layout = "/Views/Shared/_Layout.cshtml";
    var activeController = ViewContext.RouteData.Values["controller"]?.ToString()?.ToLower();
    var activeAction = ViewContext.RouteData.Values["action"]?.ToString()?.ToLower();
}

<div class="container py-4">
    <div class="row">
        <!-- Sidebar -->
        <div class="col-lg-3 mb-4">
            <div class="card border-0 shadow-sm">
                <div class="list-group list-group-flush">
                    <a href="/profile" class="list-group-item list-group-item-action py-3 @(activeController == "profile" && activeAction == "index" ? "active" : "")">
                        <i class="bi bi-person-circle me-2"></i> Account Info
                    </a>
                    <a href="/profile/security" class="list-group-item list-group-item-action py-3 @(activeController == "profile" && activeAction == "security" ? "active" : "")">
                        <i class="bi bi-shield-lock me-2"></i> Security Settings
                    </a>
                    <a href="/profile/addresses" class="list-group-item list-group-item-action py-3 @(activeController == "profile" && (activeAction == "addresses" || activeAction == "createaddress") ? "active" : "")">
                        <i class="bi bi-geo-alt me-2"></i> Addresses
                    </a>
                    <a href="/profile/payment-methods" class="list-group-item list-group-item-action py-3 @(activeController == "profile" && activeAction == "paymentmethods" ? "active" : "")">
                        <i class="bi bi-credit-card me-2"></i> Payment Methods
                    </a>
                    <a href="/profile/orders" class="list-group-item list-group-item-action py-3 @(activeController == "profile" && activeAction == "orders" ? "active" : "")">
                        <i class="bi bi-box-seam me-2"></i> Order History
                    </a>
                     <a href="/wishlist" class="list-group-item list-group-item-action py-3 @(activeController == "wishlist" ? "active" : "")">
                        <i class="bi bi-heart me-2"></i> Wishlist
                    </a>
                     <a href="/profile/more" class="list-group-item list-group-item-action py-3 @(activeController == "profile" && activeAction == "more" ? "active" : "")">
                        <i class="bi bi-three-dots me-2"></i> More Options
                    </a>
                </div>
            </div>
        </div>
        
        <!-- Content -->
        <div class="col-lg-9">
            @if (TempData["Success"] != null)
            {
                <div class="alert alert-success alert-dismissible fade show" role="alert">
                    @TempData["Success"]
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>
            }
            
            @RenderBody()
        </div>
    </div>
</div>

<style>
    .list-group-item.active {
        background-color: #0f1111; /* Amazon Black */
        border-color: #0f1111;
        color: #fff;
    }
    .list-group-item {
        border-left: 3px solid transparent;
    }
    .list-group-item:hover {
        background-color: #f3f4f6;
        border-left-color: #ff9900; /* Sparkle Orange */
    }
</style>
</style>

@section Scripts {
    @await RenderSectionAsync("Scripts", required: false)
}
